{"mappings":"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","sources":["main.js"],"sourcesContent":["const commentForm = document.querySelector(\".comments__form\");\r\nconst commentsList = document.querySelector(\".comments__list\");\r\nconst commentMainInput = document.querySelector(\".comments__form-text\");\r\nconst nameInput = document.querySelector(\".comments__form-name\");\r\nconst dateInput = document.querySelector(\".comments__form-date\");\r\nconst textInput = document.querySelector(\".comments__form-text\");\r\nlet likeBtns = document.querySelectorAll(\".comments__item-like\");\r\nlet deleteBtns = document.querySelectorAll(\".comments__item-delete\");\r\n\r\nlet likeListenerFunc = function (e) {\r\n  e.target.classList.toggle(\"comments__item-like--liked\");\r\n};\r\n\r\nlet deleteListenerFunc = function (e) {\r\n  e.target.parentElement.parentElement.parentElement.remove();\r\n};\r\n\r\nfunction checkNameLength(name, maxLength) {\r\n  if (name.length > maxLength)\r\n    return `Максимальная длина имени ${maxLength} символов!`;\r\n  if (name.length <= 0) return \"Необходимо заполнить поле с именем!\";\r\n  return false;\r\n}\r\n\r\nfunction checkDateFormat(date) {\r\n  if (\r\n    /^(0[1-9]|[12][0-9]|3[01])[- /.](0[1-9]|1[012])[- /.](19|20)\\d\\d$/.test(\r\n      date\r\n    ) != true &&\r\n    date.length > 0\r\n  ) {\r\n    return \"Дата должна быть записана в формате ДД.ММ.ГГГГ\";\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction checkCommentLength(comment) {\r\n  if (comment.textLength == 0) {\r\n    return \"Поле с комментарием должно быть заполнено!\";\r\n  }\r\n  return false;\r\n}\r\n\r\nfunction getDate(date) {\r\n  let d = new Date(),\r\n    h = (d.getHours() < 10 ? \"0\" : \"\") + d.getHours(),\r\n    m = (d.getMinutes() < 10 ? \"0\" : \"\") + d.getMinutes(),\r\n    cDate = \"\",\r\n    resString = \"\";\r\n  if (date) {\r\n    cDate = new Date(\r\n      `${date[3]}${date[4]}/${date[0]}${date[1]}/${date.slice(6)}`\r\n    );\r\n  } else {\r\n    return `сегодня, ${h}:${m}`;\r\n  }\r\n  let timeStamp = d.getTime() - cDate.getTime();\r\n  if (timeStamp < 86400000 && timeStamp >= 0) resString = `сегодня, ${h}:${m}`;\r\n  else if (timeStamp < 86400000 * 2 && timeStamp >= 0)\r\n    resString = `вчера, ${h}:${m}`;\r\n  else resString = `${date}, ${h}:${m}`;\r\n  return resString;\r\n}\r\n\r\nfunction isFormInnerRight(name = null, date = null, comment = null) {\r\n  let errors = false;\r\n  let nameValid = name ? checkNameLength(name.value, 50) : null;\r\n  let dateValid = date ? checkDateFormat(date.value) : null;\r\n  let commentValid = comment ? checkCommentLength(comment) : null;\r\n  if (nameValid) {\r\n    name.classList.add(\"comments__form-input--err\");\r\n    let errMsg = document.querySelector(\"#inp_name-err\");\r\n    errMsg.innerText = nameValid;\r\n    errors = true;\r\n  } else if (nameValid != null) {\r\n    name.classList.remove(\"comments__form-input--err\");\r\n    let errMsg = document.querySelector(\"#inp_name-err\");\r\n    errMsg.innerText = \"\";\r\n  }\r\n  if (dateValid) {\r\n    date.classList.add(\"comments__form-input--err\");\r\n    let errMsg = document.querySelector(\"#inp_date-err\");\r\n    errMsg.innerText = dateValid;\r\n    errors = true;\r\n  } else if (dateValid != null) {\r\n    date.classList.remove(\"comments__form-input--err\");\r\n    let errMsg = document.querySelector(\"#inp_date-err\");\r\n    errMsg.innerText = \"\";\r\n  }\r\n  if (commentValid) {\r\n    comment.classList.add(\"comments__form-input--err\");\r\n    let errMsg = document.querySelector(\"#inp_comment-err\");\r\n    errMsg.innerText = commentValid;\r\n    errors = true;\r\n  } else if (commentValid != null) {\r\n    comment.classList.remove(\"comments__form-input--err\");\r\n    let errMsg = document.querySelector(\"#inp_comment-err\");\r\n    errMsg.innerText = \"\";\r\n  }\r\n  return errors;\r\n}\r\n\r\ncommentMainInput.addEventListener(\"input\", (e) => {\r\n  const length = document.querySelector(\".comments__textarea-value\");\r\n  length.innerText = `${e.target.textLength}/1000`;\r\n});\r\n\r\nlikeBtns.forEach((el) => {\r\n  el.addEventListener(\"click\", likeListenerFunc);\r\n});\r\n\r\ndeleteBtns.forEach((el) => {\r\n  el.addEventListener(\"click\", deleteListenerFunc);\r\n});\r\n\r\nnameInput.addEventListener(\"keyup\", () => {\r\n  isFormInnerRight(nameInput);\r\n});\r\n\r\ndateInput.addEventListener(\"keyup\", () => {\r\n  isFormInnerRight(null, dateInput);\r\n});\r\n\r\ntextInput.addEventListener(\"keypress\", (e) => {\r\n  if (e.which === 13 && !e.shiftKey) {\r\n    if (!e.repeat) {\r\n      const newEvent = new Event(\"submit\", { cancelable: true });\r\n      e.target.form.dispatchEvent(newEvent);\r\n    }\r\n    e.preventDefault();\r\n  }\r\n});\r\n\r\ntextInput.addEventListener(\"keyup\", () => {\r\n  isFormInnerRight(null, null, textInput);\r\n});\r\n\r\ncommentForm.addEventListener(\"submit\", (e) => {\r\n  e.preventDefault();\r\n  if (isFormInnerRight(nameInput, dateInput, textInput)) return;\r\n  const commentBox = document.createElement(\"div\");\r\n  commentBox.classList.add(\"comments__list-item\");\r\n  const name = document.createElement(\"span\");\r\n  name.classList.add(\"comments__item-name\");\r\n  const date = document.createElement(\"span\");\r\n  date.classList.add(\"comments__item-date\");\r\n  const text = document.createElement(\"p\");\r\n  text.classList.add(\"comments__item-text\");\r\n  name.innerText = nameInput.value;\r\n  date.innerText = getDate(dateInput.value);\r\n\r\n  text.innerText = textInput.value.replace(/\\n/gm, \" \");\r\n  const commentBtm = document.createElement(\"div\");\r\n  commentBtm.classList.add(\"comments__item-btm\");\r\n  const likeElmnt = document.createElement(\"i\");\r\n  likeElmnt.classList.add(\"comments__item-like\");\r\n  const itemBox = document.createElement(\"div\");\r\n  itemBox.classList.add(\"comments__item-box\");\r\n  const deleteBtn = document.createElement(\"i\");\r\n  deleteBtn.classList.add(\"comments__item-delete\");\r\n  itemBox.append(date);\r\n  itemBox.append(deleteBtn);\r\n  commentBtm.append(likeElmnt);\r\n  commentBtm.append(itemBox);\r\n  commentBox.append(name);\r\n  commentBox.append(text);\r\n  commentBox.append(commentBtm);\r\n  commentsList.append(commentBox);\r\n  likeBtns = document.querySelectorAll(\".comments__item-like\");\r\n  deleteBtns = document.querySelectorAll(\".comments__item-delete\");\r\n  deleteBtns.forEach((el) => {\r\n    el.removeEventListener(\"click\", deleteListenerFunc);\r\n    el.addEventListener(\"click\", deleteListenerFunc);\r\n  });\r\n  likeBtns.forEach((el) => {\r\n    el.removeEventListener(\"click\", likeListenerFunc);\r\n    el.addEventListener(\"click\", likeListenerFunc);\r\n  });\r\n});\r\n"],"names":[],"version":3,"file":"index.c4775257.js.map","sourceRoot":"/__parcel_source_root/"}